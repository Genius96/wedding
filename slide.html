<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Slide Cưới Trung Hiếu & Khánh Ly</title>

    <!-- SEO Tag -->
    <meta name="author" content="wedding">
    <meta name="language" content="vi">
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="googlebot" content="index, follow, max-image-preview:large">
    <meta name="title" content="Website Slide Cưới Trung Hiếu và Khánh Ly Trực Tuyến">
    <meta name="description"
        content="Website trình chiếu slide cưới Trung Hiếu và Khánh Ly, chia sẻ khoảnh khắc đẹp trong ngày trọng đại.">
    <meta name="keywords"
        content="slide cưới, cưới, slide cưới trực tuyến, slideshow cưới, ảnh cưới, mẫu slide cưới, website slide cưới, slide cưới github, mẫu website, mẫu website slide cưới">
    <meta property="og:title" content="Website Slide Cưới Trung Hiếu và Khánh Ly Trực Tuyến">
    <meta property="og:description"
        content="Website trình chiếu slide cưới Trung Hiếu và Khánh Ly, chia sẻ khoảnh khắc đẹp trong ngày trọng đại.">
    <meta property="og:keywords"
        content="slide cưới, cưới, slide cưới trực tuyến, slideshow cưới, ảnh cưới, mẫu slide cưới, website slide cưới, slide cưới github, mẫu website, mẫu website slide cưới">
    <meta property="og:image" content="./assets/images/image_cut/cap-doi.jpeg">
    <meta property="og:image:secure_url" content="./assets/images/image_cut/cap-doi.jpeg">
    <meta property="og:image:type" content="image/webp">
    <meta property="og:image:alt" content="Website Slide Cưới Trung Hiếu và Khánh Ly Trực Tuyến">
    <meta property="og:image:width" content="980">
    <meta property="og:image:height" content="980">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="vi_VN">
    <meta property="og:url" content="https://hieuvt.name.vn">
    <meta property="og:site_name" content="Website Slide Cưới Trung Hiếu và Khánh Ly Trực Tuyến">

    <!-- Appearance -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Website Slide Cưới Trung Hiếu và Khánh Ly Trực Tuyến">
    <meta name="theme-color" content="#000000">
    <meta name="color-scheme" content="dark light">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="canonical" href="https://hieuvt.name.vn/">
    <link rel="shortcut icon" type="image/x-icon" href="./assets/favicon.ico">
    <link rel="apple-touch-icon" sizes="192x192" href="./assets/images/icon-192x192.png">
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">

    <!-- Preconnect CDN -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">

    <!-- Preload Resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap" as="style">
    <link rel="preload" href="./css/parfumerie-script-pro.css" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
        integrity="sha256-zRgmWB5PK4CvTx4FiXsxbHaYRBBjz/rvu97sOC7kzXI=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"
        integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous" as="style">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha256-NfRUfZNkERrKSFA0c1a8VmCplPDYtpTYj5lQmKe1R/o=" crossorigin="anonymous" as="script">

    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap">

    <!-- Dependencies CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
        integrity="sha256-zRgmWB5PK4CvTx4FiXsxbHaYRBBjz/rvu97sOC7kzXI=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css"
        integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/guest.css">

    <style>
        .font-esthetic-title {
            font-family: 'Dancing Script', cursive !important;
        }

        .font-esthetic-content {
            font-family: 'Lora', serif !important;
        }

        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
            z-index: 0;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            z-index: 1;
            will-change: transform, opacity;
        }

        .slide.active {
            opacity: 1;
            z-index: 2;
        }

        .slide img {
            height: 100%;
            width: auto;
            max-width: 33.33%;
            object-fit: contain;
            border-radius: 10px;
            flex: 1;
        }

        .slide.single img {
            max-width: 100%;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes rotateIn {
            0% {
                transform: rotate(5deg);
                opacity: 0;
            }

            100% {
                transform: rotate(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromLeft {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromRight {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .slide.active.fade {
            animation: fadeIn 1.2s ease-in-out forwards;
        }

        .slide.active.zoom {
            animation: zoomIn 1.2s ease-in-out forwards;
        }

        .slide.active.rotate {
            animation: rotateIn 1.2s ease-in-out forwards;
        }

        .slide.active.slide-left {
            animation: slideInFromRight 1.2s ease-in-out forwards;
        }

        .slide.active.slide-right {
            animation: slideInFromLeft 1.2s ease-in-out forwards;
        }

        #music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
            z-index: 3;
        }

        #music-control:hover {
            transform: scale(1.1);
        }

        #music-control img {
            width: 30px;
            height: 30px;
        }

        #error-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
            z-index: 4;
        }

        #fireworks,
        #hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            opacity: 0;
            transition: opacity 1s;
        }

        #fireworks.active,
        #hearts.active {
            opacity: 1;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: url('https://img.icons8.com/emoji/48/000000/heart-suit.png') no-repeat center/cover;
        }

        @keyframes burst {
            0% {
                transform: scale(0);
                opacity: 1;
            }

            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        .firework {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ffd700, #ff1744, transparent);
            border-radius: 50%;
        }
    </style>
</head>

<body>
    <div id="music-control">
        <img id="music-icon" src="https://img.icons8.com/ios-filled/50/000000/pause.png" alt="Pause">
    </div>
    <div id="error-message"></div>
    <audio id="background-music"></audio>
    <div id="fireworks"></div>
    <div id="hearts"></div>

    <script>
        const images = [
            'assets/images/trang-1.jpg',
            'assets/images/den-1.jpg',
            'assets/images/trang-2.jpg',
            'assets/images/den-2.jpg',
            'assets/images/trang-3.jpg',
            'assets/images/den-3.jpg',
            'assets/images/trang-4.jpg',
            'assets/images/den-4.jpg',
            'assets/images/trang-5.jpg',
            'assets/images/den-5.jpg',
            'assets/images/trang-6.jpg',
            'assets/images/den-5.jpg',
            'assets/images/trang-7.jpg',
            'assets/images/den-5.jpg',
            'assets/images/trang-8.jpg',
            'assets/images/den-6.jpg',
            'assets/images/trang-9.jpg',
            'assets/images/den-7.jpg',
            'assets/images/trang-10.jpg',
            'assets/images/trang-11.jpg',
            'assets/images/trang-12.jpg',
            'assets/images/trang-13.jpg',
            'assets/images/trang-14.jpg',
            'assets/images/trang-15.jpg',
            'assets/images/trang-16.jpg',
        ];
        const musicFiles = [
            'assets/music/i-do-optimized.mp3',
            'assets/music/marry-you-optimized.mp3',
            'assets/music/perfect-optimized.mp3',
            'assets/music/sugar-optimized.mp3'
        ];
        let currentImageIndex = 0;
        let currentMusicIndex = 0;
        let isMusicPlaying = true;
        let slides = [];
        let slideCounter = 0;
        const effects = ['fade', 'slide-left', 'slide-right', 'zoom', 'rotate'];

        const audio = document.getElementById('background-music');
        const musicControl = document.getElementById('music-control');
        const musicIcon = document.getElementById('music-icon');
        const errorMessage = document.getElementById('error-message');
        const fireworks = document.getElementById('fireworks');
        const hearts = document.getElementById('hearts');

        // Hiển thị thông báo lỗi
        function showError(msg) {
            errorMessage.textContent = msg;
            errorMessage.style.display = 'block';
            setTimeout(() => { errorMessage.style.display = 'none'; }, 3000);
        }

        // Kiểm tra tỉ lệ ảnh
        async function isPortrait(src) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(img.width / img.height < 1);
                img.onerror = () => {
                    showError(`Không tải được ảnh: ${src}`);
                    resolve(false);
                };
                img.src = src;
            });
        }

        // Tạo các slide
        async function createSlides() {
            let i = 0;
            while (i < images.length) {
                const slide = document.createElement('div');
                slide.classList.add('slide');
                if (i === 0) slide.classList.add('active', 'fade');

                const isPortraitImage = await isPortrait(images[i]);
                const screenRatio = window.innerWidth / window.innerHeight;

                if (isPortraitImage && screenRatio > 1.5 && i < images.length - 1) {
                    const img1 = document.createElement('img');
                    img1.src = images[i];
                    img1.alt = `Ảnh cưới ${i + 1}`;
                    img1.onerror = () => showError(`Lỗi tải ảnh: ${images[i]}`);
                    slide.appendChild(img1);

                    if (i + 1 < images.length && await isPortrait(images[i + 1])) {
                        const img2 = document.createElement('img');
                        img2.src = images[i + 1];
                        img2.alt = `Ảnh cưới ${i + 2}`;
                        img2.onerror = () => showError(`Lỗi tải ảnh: ${images[i + 1]}`);
                        slide.appendChild(img2);
                        i++;
                        if (i + 1 < images.length && await isPortrait(images[i + 1]) && screenRatio > 2) {
                            const img3 = document.createElement('img');
                            img3.src = images[i + 1];
                            img3.alt = `Ảnh cưới ${i + 2}`;
                            img3.onerror = () => showError(`Lỗi tải ảnh: ${images[i + 1]}`);
                            slide.appendChild(img3);
                            i++;
                        }
                    }
                } else {
                    const img = document.createElement('img');
                    img.src = images[i];
                    img.alt = `Ảnh cưới ${i + 1}`;
                    img.onerror = () => showError(`Lỗi tải ảnh: ${images[i]}`);
                    slide.appendChild(img);
                    slide.classList.add('single');
                }

                document.body.appendChild(slide);
                slides.push(slide);
                i++;
            }
            console.log(`Tổng số slide: ${slides.length}`);
        }

        // Hiệu ứng pháo hoa
        function showFireworks() {
            fireworks.innerHTML = '';
            fireworks.classList.add('active');
            for (let i = 0; i < 10; i++) {
                const firework = document.createElement('div');
                firework.classList.add('firework');
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                firework.style.animation = `burst ${1 + Math.random()}s ease-out forwards`;
                fireworks.appendChild(firework);
            }
            console.log('Hiệu ứng pháo hoa được kích hoạt');
            setTimeout(() => fireworks.classList.remove('active'), 2000);
        }

        // Hiệu ứng trái tim rơi
        function showHearts() {
            hearts.innerHTML = '';
            hearts.classList.add('active');
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animation = `fall ${2 + Math.random() * 2}s linear forwards`;
                hearts.appendChild(heart);
            }
            console.log('Hiệu ứng trái tim được kích hoạt');
            setTimeout(() => hearts.classList.remove('active'), 4000);
        }

        // Chuyển slide với hiệu ứng ngẫu nhiên
        function showNextSlide() {
            if (slides.length === 0) {
                showError('Không có slide nào để hiển thị!');
                return;
            }

            // Ẩn slide hiện tại
            slides[currentImageIndex].classList.remove('active', ...effects);
            slides[currentImageIndex].style.opacity = '0';
            slides[currentImageIndex].style.transform = 'none';

            // Tăng chỉ số slide
            currentImageIndex = (currentImageIndex + 1) % slides.length;
            const nextSlide = slides[currentImageIndex];

            // Đặt lại trạng thái ban đầu cho slide tiếp theo
            nextSlide.style.opacity = '0';
            nextSlide.style.transform = 'none';
            nextSlide.classList.remove(...effects);

            // Chọn hiệu ứng ngẫu nhiên
            const randomEffect = effects[Math.floor(Math.random() * effects.length)];
            nextSlide.classList.add('active', randomEffect);

            console.log(`Hiển thị slide ${currentImageIndex + 1}/${slides.length}, hiệu ứng: ${randomEffect}`);

            // Tăng xác suất hiển thị pháo hoa và đảm bảo xuất hiện sau mỗi 3 slide
            slideCounter++;
            if (slideCounter % 3 === 0) {
                showFireworks();
                console.log('Hiển thị pháo hoa (bắt buộc sau 3 slide)');
            } else if (Math.random() < 0.5) {
                if (Math.random() < 0.6) {
                    showFireworks();
                    console.log('Hiển thị pháo hoa (ngẫu nhiên)');
                } else {
                    showHearts();
                    console.log('Hiển thị trái tim (ngẫu nhiên)');
                }
            }
        }

        // Tải và phát nhạc
        function loadMusic() {
            audio.src = musicFiles[currentMusicIndex];
            if (isMusicPlaying) {
                audio.play().catch(e => showError('Lỗi phát nhạc: ' + e.message));
            }
        }

        // Chuyển bài nhạc tiếp theo khi hết
        audio.addEventListener('ended', () => {
            currentMusicIndex = (currentMusicIndex + 1) % musicFiles.length;
            loadMusic();
        });

        // Điều khiển phát/dừng nhạc
        musicControl.addEventListener('click', () => {
            if (isMusicPlaying) {
                audio.pause();
                musicIcon.src = 'https://img.icons8.com/ios-filled/50/000000/play.png';
            } else {
                audio.play().catch(e => showError('Lỗi phát nhạc: ' + e.message));
                musicIcon.src = 'https://img.icons8.com/ios-filled/50/000000/pause.png';
            }
            isMusicPlaying = !isMusicPlaying;
        });

        // Khởi tạo
        createSlides().then(() => {
            if (slides.length === 0) {
                showError('Không tìm thấy ảnh hợp lệ!');
                return;
            }
            loadMusic();
            setInterval(showNextSlide, 5000);
        }).catch(e => showError('Lỗi khởi tạo slideshow: ' + e.message));
    </script>
</body>

</html>